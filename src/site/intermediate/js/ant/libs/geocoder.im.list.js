function GetYMapsGeoPointer(c){c=new YMaps.Geocoder(c,{results:1});YMaps.Events.observe(c,c.Events.Load,function(){if(this.length())geoResult=this.get(0),document.write(this.get(0).getGeoPoint());else return!1});YMaps.Events.observe(c,c.Events.Fault,function(){return!1})}function oLoading(c){this.divId=c}oLoading.prototype.start=function(){$(this.divId).show()};oLoading.prototype.complete=function(){$(this.divId).hide()};
function StrReplase(c,a){for(var b in a)c=c.replace("#"+b+"#",a[b]);return c}function ElementGeocoder(c,a,b){this._id=c;this._lng=a;this._lat=b}function GeocoderImList(){this.arrGeocoderImList=[];this.countImList=0;this.imDataSCount=null;this.isRent=this.isSale=this.isDone=!1}
GeocoderImList.prototype.setElementGeocoder=function(c,a,b){this.arrGeocoderImList[a+""+b]?this.arrGeocoderImList[a+""+b][this.arrGeocoderImList[a+""+b].length]=new ElementGeocoder(c,a,b):(this.arrGeocoderImList[a+""+b]=[],this.arrGeocoderImList[a+""+b][0]=new ElementGeocoder(c,a,b));this.countImList++};GeocoderImList.prototype.getCountElementGeocoder=function(c){return this.arrGeocoderImList[c].length};
GeocoderImList.prototype.cleanGeocoderImList=function(){this.arrGeocoderImList=[];this.countImList=0;this.imDataSCount=null;this.isRent=this.isSale=this.isDone=!1};GeocoderImList.prototype.getLinkToPanorama=function(c,a,b,e){return c.replace("hrefToPanorama","http://maps.yandex.ru/?text="+e+" &ol=stv&oll="+a+"%2C"+b+"&ll="+a+"%2C"+b+"&l=map%2Cstv")};
GeocoderImList.prototype.getImAdtess=function(c,a){return(imDataS[a].im_city_name!=""?(imDataS[a].im_city_name=="0\u041a\u0438\u0435\u0432"?"\u041a\u0438\u0435\u0432":imDataS[a].im_city_name)+", ":"")+(imDataS[a].im_area_name!=""?imDataS[a].im_area_name+", ":"")+(imDataS[a].im_adress_name!=""?imDataS[a].im_adress_name+", ":"")+(imDataS[a].im_adress_house!=""?imDataS[a].im_adress_house+", ":"")};
GeocoderImList.prototype.getPlacemarkTemplate=function(c,a,b,e){this.getRentSale(e);e="";if(this.arrGeocoderImList[a].length==1)return this.isSale&&b[this.arrGeocoderImList[a][0]._id].tempSale&&(e+=this.getLinkToPanorama(b[this.arrGeocoderImList[a][0]._id].tempSale,this.arrGeocoderImList[a][0]._lng,this.arrGeocoderImList[a][0]._lat,this.getImAdtess(b,this.arrGeocoderImList[a][0]._id))),this.isRent&&b[this.arrGeocoderImList[a][0]._id].tempRent&&(e+=this.getLinkToPanorama(b[this.arrGeocoderImList[a][0]._id].tempRent,
this.arrGeocoderImList[a][0]._lng,this.arrGeocoderImList[a][0]._lat,this.getImAdtess(b,this.arrGeocoderImList[a][0]._id))),e;if(this.arrGeocoderImList[a].length>1){var f=[],g=e="";f.data="";g+="isSale="+this.isSale+";isRent="+this.isRent+";lenght="+this.arrGeocoderImList[a].length+";";for(var d=0;d<this.arrGeocoderImList[a].length;d++)this.isSale==!0&&b[this.arrGeocoderImList[a][d]._id].tempSale&&(g+="sale;imCode="+b[this.arrGeocoderImList[a][d]._id].im_code,e+=this.getLinkToPanorama(b[this.arrGeocoderImList[a][d]._id].tempSale,
this.arrGeocoderImList[a][d]._lng,this.arrGeocoderImList[a][d]._lat,this.getImAdtess(b,this.arrGeocoderImList[a][d]._id))),this.isRent==!0&&b[this.arrGeocoderImList[a][d]._id].tempRent&&(g+="rent;imCode="+b[this.arrGeocoderImList[a][d]._id].im_code,e+=this.getLinkToPanorama(b[this.arrGeocoderImList[a][d]._id].tempRent,this.arrGeocoderImList[a][d]._lng,this.arrGeocoderImList[a][d]._lat,this.getImAdtess(b,this.arrGeocoderImList[a][d]._id)));f.data+=e;f.count=this.arrGeocoderImList[a].length;return StrReplase(c.group,
f)}};GeocoderImList.prototype.getRentSale=function(c){for(var a=0;a<c.length;a++)for(var b in c[a]){if(b=="im_is_sale")this.isSale=!0;if(b=="im_is_rent")this.isRent=!0}};GeocoderImList.prototype.setIsDone=function(c){if(c==this.imDataSCount)this.isDone=!0};
